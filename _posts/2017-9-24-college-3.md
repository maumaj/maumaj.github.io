---
layout: post
title: "Where do they graduate?"
date: 2018-04-21
categories: [Explorations]
---

<div markdown="0">
{% include pca.html %}
</div>

![Imgur](https://i.imgur.com/1LB0zl1.png)
![Imgur](https://i.imgur.com/cK1GrAn.png)

*Top Left: a word cloud with common words scraped from front pages of over
2000 college's home pages. We can tell what colleges are advertising and
making easily accessible for students -- they're promoting popular programs
like business management, highlighting their tech-related programs, publicizing
financial aid, and soliciting questions.*


*Top Right: based on a sentiment analysis of college front pages, we see a
slight lean towards positive sentiments. Although they focus on including
information for reference, colleges have a vested interest in making their
product fresh and exciting*

In today's fast-paced, information-driven society, a college degree is a valuable
possession on the job market. Since 1970, the US has seen enrollment more than double.

![Imgur](https://i.imgur.com/4zOeVoy.png)

Unfortunately —  though unsurprisingly — tuition and fees have done the same, even when adjusted for inflation. Funding cuts and growing endowments have contributed to this steep increase, alongside a change in college's marketing strategies (a higher sticker price means better 'deals').

<div markdown="0">
{% include avg_tuition.html %}
</div>

But despite this massive increase in tuition, graduation rates have remained roughly the same. It's becoming more and more pertinent to ask "is the cost of higher education justified? is it worth it?"; but even before broaching those topics, we've got to consider whether students are succeeding (graduating from college).

![Imgur](https://i.imgur.com/k6UvHjL.png)

Based on college structure, tuition, and student demographics, can we predict the graduation rate of a given college? Can we find what correlates with higher graduation rates?

For this preliminary study, we'll take a look at data from the US Department of Education. Each year, they publish a 'College Scorecard', storing mostly quantitative data on nearly 2500 institutions of higher education. With every college you can find information on factors like 'highest degree awarded','faculty salary','average SAT score','percent of students who are women', and — most importantly — 'four year graduation rate'. You can access that data yourself [here](https://collegescorecard.ed.gov/data/).

Our first question, concerning predictions, can be addressed with non-parametric machine learning regression techniques. Yes, that's a mouthful, but follow along with some examples. We first turn to *decision trees* -- these algorithms, more often used for classification, identify areas of high variance among the factors we're inputting and creates 'splits' with which to analyze new data. For example, if we're looking at biomes, the decision tree algorithm may identify that some have a high plant density and some a lower plant density, and find more clear divisions down each of those paths. Think of the tree like a game of 20 questions, where different answers lead to a different value down the road. (learn more [here](https://towardsdatascience.com/decision-trees-in-machine-learning-641b9c4e8052))

When testing a model we like to build it ('fit it') on a certain portion of the data, and test it on another -- that helps us see how well the model would behave on new data. Quantitatively we use the metrics of R-squared and Mean Squared Error (MSE). R-Squared tells us how much the model captures deviations from the mean (in this case, the mean graduation rate). MSE, as the name implies, looks at the difference between each predicted and actual graduation rate, squares the value, and takes the average across all graduation rates.

So let's take a look! How well does the decision tree fare?

![Imgur](https://i.imgur.com/D5uQY8N.png)
![Imgur](https://i.imgur.com/PeTjZ2X.png)

With an R-squared of 0.852715 and MSE of 0.083714, our model has strong predictive power. However, we can see that predicted values fall into certain buckets, with under a dozen 'graduation rates' — obviously graduation rates fall within a range, and don't present as a few discrete values. I'd hypothesize that this is the result of using a decision tree, as it's difficult for a *range* of quantitative values to fall out from a 'game of 20 questions.'

Let's try Support Vector Regression (SVR) instead. This method 'maps' each college as a point in space -- so if colleges have five associated features, that college will be represented as a point in a five-dimensional vector space. With all colleges 'mapped' onto this space, the algorithm divides the space with hyperplanes to group colleges by the feature we're predicting (so grouping colleges with high graduation rates, low graduation rates, etc). When we're predicting a graduation rate for a new college, it will be 'mapped' onto the space and its graduation rate will be predicted based on its distance from the hyperplanes. But does it work when predicting graduation rates?


![Imgur](https://i.imgur.com/TqFYaio.png)
![Imgur](https://i.imgur.com/uCA7p07.png)


While our R-squared has decreased to 0.779528, our MSE has also decreased. It's clear that we face a tradeoff when selecting a machine learning model. Not bad! We now know that college graduation rates aren't completely arbitrary -- they can be predicted based on the factors within the US Dept. of Education's 'College Scorecard'. But while we could implement a 'guessing game' widget to predict your college's graduation rate, that would be neither helpful nor very interesting.

Instead, let's take a more explanatory approach to modeling college graduation rates. Linear regression will give us not only predictions, but associate weights with each input variable. We'll take those weights as measures of importance, telling us which input variables do the best job of predicting graduation rates.

![Imgur](https://i.imgur.com/pD176A4.png)
![Imgur](https://i.imgur.com/Gf8O5DZ.png)

Great! A list of the most important variables. Unfortunately, some of the variables in the College Scorecard include repayment rates, salaries post-graduation, and percent of individuals employed. We'll handpick several variables that come into play *before* graduation. Take a look --

![Imgur](https://i.imgur.com/Wk9NFEy.png)
![Imgur](https://i.imgur.com/b6x6wdP.png)

Ok, that's a clearer picture. And we could probably predict some of these predictors. So let's take a deeper dive into the features that let us predict the graduation rate.

Below, we find that some of the biggest weights include 'share of students who are dependents,' 'admission rate,' 'share of students who are married','whether the college is women only','percent of faculty who are full time','public or private school', 'average age of entry for students,' 'SAT scores', 'tuition and fees out-of-state','average family income','number of Undergraduate students,' and 'tuition and fees.'

<div markdown="0">
{% include enrollment.html %}
</div>

We see a correlation between the size of institutions and their four-year graduation rate. At least to me, that's really surprising! One might guess that students would more easily 'get lost in the crowd' at larger universities. Furthermore, many small liberal arts colleges advertise that smaller class sizes keep students more engaged and prepare them for success. Another research question might quantitatively probe how well liberal arts institutions deliver on their promises.

<div markdown="0">
{% include faminc.html %}
</div>

Here there's a mix of trends. On the one hand, amongst colleges with a lower average family income there are a range of graduation rates. On the other, there's generally a increase in graduate rate as average family income rises. It's clear that there are no colleges with high average family incomes and low graduation rates. **more**

<div markdown="0">
{% include gender.html %}
</div>

There isn't a clearly defined trend in graduation rate as share by gender changes. If nothing else, colleges with a 4-year graduation rate over 80% see a slight decline in share of students who are female. This seems odd to me, as female-identifying individuals receive higher grades than males on average (in 2009, average high school GPAs of 3.10 for women and 2.90 for men, according to the US Dept. of Education)

<!--<div markdown="0">
{% include marriage.html %}
</div>-->

<div markdown="0">
{% include dependents.html %}
</div>

Here, "dependents" means individuals who are listed as financially dependent on their parents' or guardians' tax filings. Obviously, this could also be a proxy for age -- general, a college with more dependents will have younger students. Then, somewhat unfortunately, the trend makes sense; older students may have families and other responsibilities that could make finishing a degree infeasible.

<div markdown="0">
{% include tuition.html %}
</div>

Here's our favorite graph again -- tuition rising all too quickly. We see a group of schools with in-state tuition with consistent tuition across all graduation rates. Good thing, as all institutions (especially state colleges) should maintain a consistently low tuition regardless of graduation outcomes. When it comes to private colleges (and some public out-of-state schools) with more freedom to determine their tuition, we do see tuition rising as graduation rates increase. Part of this is causal, as students making a bigger investment in education will be less likely to not graduate on time. However, paying more tuition will also result in access to more academic and personal support. Regardless of the underlying factors, it's an unfortunately striking correlation between tuition and graduation rates.

<div markdown="0">
{% include admission.html %}
</div>

We could've predicted this, to an extent -- generally speaking, lower admission rates correlate with higher graduation rates. More interestingly, there seems to be a cluster of somewhat competitive school with middle-of-the-row graduation rates. More competitive school are fewer and further between, but nearly all have more competitive admissions.

So what have we learned? While college tuition has skyrocketed and graduation rates held steady, there's still some predictability to those graduation rates. We can use non-parametric methods to predict a given college's graduation rate with impressive accuracy, but more importantly, we can use regression to check out what's behind a graduation rate.

The biggest predictive factors include share of dependent students, admission rate, share of married students, share of female students, and whether it's a women-only college. It's surprising that share of female students isn't an even stronger indicator given high school GPAs, and that bigger schools have higher graduation rates.

Another takeaway is the negative correlation between share of dependent (and married) students with 4yr grad rates. While this regression model isn't intended to show causal relationships, colleges could certainly provide more support to independent, married, and older students. They could offer more flexible schedules to accommodate working adults, offer credits for working, or give greater tuition breaks to parents.
